{
  "version": 3,
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Mixin",
    "define",
    "construct",
    "initProtectionMessage",
    "tr",
    "__protectionOnValue",
    "scada",
    "mnemo",
    "dialog",
    "MProtection",
    "PROTECTION_DEFAULT_VALUE",
    "destruct",
    "_disposeObjects",
    "properties",
    "protectionKey",
    "init",
    "nullable",
    "check",
    "protectionMessage",
    "deferredInit",
    "showProtectionDialog",
    "statics",
    "members",
    "__protectionDialog",
    "initProtection",
    "settings",
    "undefined",
    "setProtectionKey",
    "extractOptionFromSettings",
    "settingsHasParam",
    "__parseValuesOn",
    "onValue",
    "setShowProtectionDialog",
    "show_message",
    "setProtectionMessage",
    "message",
    "valueOrValues",
    "protectionValueOn",
    "Array",
    "isArray",
    "slice",
    "checkProtected",
    "value",
    "getData",
    "isProtected",
    "getProtectionKey",
    "getShowProtectionDialog",
    "__showProtectionDialog",
    "_dialogStack",
    "remove",
    "setSelection",
    "includes",
    "_createMsgWindow",
    "addAt",
    "win",
    "ui",
    "container",
    "Composite",
    "layout",
    "Canvas",
    "__setupLayout",
    "add",
    "__createAtom",
    "HBox",
    "setSpacing",
    "setAlignX",
    "setLayout",
    "atom",
    "basic",
    "Atom",
    "getProtectionMessage",
    "getChildControl",
    "setTextColor"
  ],
  "sources": [
    "C:/Users/dadovaz/Documents/Dialog/mnemo.dialog/source/class/scada/mnemo/dialog/MProtection.js"
  ],
  "sourcesContent": [
    "qx.Mixin.define(\"scada.mnemo.dialog.MProtection\", {\n    construct() {\n        this.initProtectionMessage(this.tr(\"The control is blocked\"));\n        this.__protectionOnValue = [scada.mnemo.dialog.MProtection.PROTECTION_DEFAULT_VALUE];\n    },\n\n    destruct() {\n        this._disposeObjects(\"__protectionDialog\");\n        this.__protectionOnValue = null;\n    },\n\n    properties: {\n        protectionKey: {\n            init: null,\n            nullable: true,\n            check: \"String\"\n        },\n\n        protectionMessage: {\n            deferredInit: true,\n            check: \"String\"\n        },\n\n        showProtectionDialog: {\n            init: false,\n            check: \"Boolean\"\n        }\n    },\n\n    statics: {\n        PROTECTION_DEFAULT_VALUE: 1\n    },\n\n    members: {\n        __protectionDialog: null,\n\n        initProtection(settings){\n            if (settings === undefined)\n                return;\n\n            if (typeof settings !== 'object'){\n                this.setProtectionKey(settings);\n                return;\n            }\n\n            const protectionKey = this.extractOptionFromSettings(\"key\", settings, \"Не задан ключ для блокировки окна\");\n            this.setProtectionKey(protectionKey);\n\n            if (this.settingsHasParam(settings, \"onValue\")){\n                this.__parseValuesOn(settings.onValue);\n            }\n\n            if (this.settingsHasParam(settings, \"show_message\")){\n                this.setShowProtectionDialog(settings.show_message);\n            }\n\n            if (this.settingsHasParam(settings, \"message\")){\n                this.setShowProtectionDialog(true);\n                this.setProtectionMessage(settings.message);\n            }\n        },\n\n        __parseValuesOn(valueOrValues){\n            let protectionValueOn;\n            if (Array.isArray(valueOrValues)){\n                protectionValueOn = valueOrValues.slice();\n            } else {\n                protectionValueOn = [valueOrValues];\n            }\n            this.__protectionOnValue = protectionValueOn;\n        },\n\n        checkProtected(){\n            const value = this.getData();\n            if (this.isProtected(value[this.getProtectionKey()])){\n                if (this.getShowProtectionDialog()){\n                    this.__showProtectionDialog();\n                }\n            } else {\n                if (this.__protectionDialog && this._dialogStack){\n                    this._dialogStack.remove(this.__protectionDialog);\n                    this._dialogStack.setSelection([]);\n                    this.__protectionDialog = null;\n                }\n            }\n        },\n\n        isProtected(value){\n            return this.__protectionOnValue.includes(value);\n        },\n\n        __showProtectionDialog(){\n            if (!this.__protectionDialog){\n                this.__protectionDialog = this._createMsgWindow();\n            }\n            this._dialogStack.addAt(this.__protectionDialog, 0);\n        },\n\n        _createMsgWindow(){\n            const win = new qx.ui.container.Composite(new qx.ui.layout.Canvas());\n            this.__setupLayout(win);\n            win.add(this.__createAtom());\n            return win;\n        },\n\n        __setupLayout(win){\n            const layout = new qx.ui.layout.HBox();\n            layout.setSpacing(10);\n            layout.setAlignX(\"center\");\n            win.setLayout(layout);\n        },\n\n        __createAtom(){\n            const atom = new qx.ui.basic.Atom(this.getProtectionMessage(), \"@MaterialIcons/warning/32\");\n            atom.getChildControl(\"icon\").setTextColor(\"yellow\");\n            return atom;\n        }\n    }\n});"
  ],
  "mappings": "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"
}